<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Clasa a VI-a — Română și Matematică</title>
  <style>
    :root{
      --bg-grad: linear-gradient(135deg,#0f4c81 0%,#6a34a5 20%,#0ba678 40%,#f2c94c 60%,#e94e77 80%,#08a8b5 100%);
      --glass: rgba(255,255,255,0.08);
      --card: rgba(255,255,255,0.88);
      --text: #072032;
      --muted: #3f5766;
      --radius:16px;
      --shadow: 0 10px 30px rgba(6,18,38,0.18);
      --maxw:980px;
    }
    html,body{
      height:100%;
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg-grad);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .container{
      max-width:var(--maxw);
      margin:28px auto;
      padding:18px;
    }

    header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      color:white;
      margin-bottom:14px;
    }
    header h1{
      margin:0;
      font-size:20px;
      line-height:1.05;
      letter-spacing:-0.2px;
      text-shadow:0 2px 8px rgba(0,0,0,0.18);
    }
    header p{
      margin:0;
      opacity:0.95;
      font-size:13px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.80));
      border-radius:var(--radius);
      padding:18px;
      box-shadow:var(--shadow);
      backdrop-filter: blur(6px) saturate(120%);
      border: 1px solid rgba(255,255,255,0.4);
    }

    label{
      display:block;
      font-weight:600;
      margin-bottom:8px;
      color:var(--text);
    }

    textarea#intrebare{
      width:100%;
      min-height:120px;
      padding:14px;
      border-radius:12px;
      border:1px solid rgba(6,18,38,0.06);
      font-size:15px;
      box-sizing:border-box;
      resize:vertical;
      outline:none;
    }

    .controls{
      display:flex;
      gap:10px;
      margin-top:12px;
      flex-wrap:wrap;
      align-items:center;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 14px;
      border-radius:12px;
      border:none;
      font-weight:600;
      cursor:pointer;
      color:white;
      box-shadow:0 6px 16px rgba(3,10,20,0.12);
      user-select:none;
    }
    .btn svg{width:18px;height:18px;opacity:0.98}

    .btn-rasp { background: #0b66ff; }
    .btn-voce { background: #07a87d; }
    .btn-cit { background: #8b44ff; }
    .btn-list { background: #f2a400; color:#08202a; box-shadow:none; }
    .btn-clear{ background: #e64b4b; }
    .btn-outline{
      background:transparent;
      color:var(--text);
      border:1px solid rgba(6,18,38,0.06);
      box-shadow:none;
    }

    #raspuns{
      margin-top:16px;
      padding:18px;
      background:var(--card);
      border-radius:12px;
      line-height:1.6;
      font-size:15px;
      color:var(--text);
      box-shadow:0 8px 22px rgba(6,18,38,0.06);
      white-space:pre-wrap;
      max-height:58vh;
      overflow:auto;
    }

    .signature{
      position:fixed;
      right:14px;
      bottom:12px;
      background:rgba(255,255,255,0.18);
      padding:8px 12px;
      border-radius:999px;
      font-size:13px;
      color:#062229;
      backdrop-filter: blur(6px);
      border:1px solid rgba(255,255,255,0.24);
      box-shadow:0 6px 18px rgba(3,10,20,0.12);
    }

    /* responsive */
    @media (max-width:880px){
      header{flex-direction:column;align-items:flex-start}
      .controls{flex-direction:column;align-items:stretch}
      .btn{width:100%;justify-content:center}
      #raspuns{max-height:50vh}
      :root{--maxw:94%}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>AI Clasa a VI-a</h1>
        <p>Română și Matematică, rezumate detaliate și calcule rapide</p>
      </div>
      <div style="text-align:right;color:rgba(255,255,255,0.95)">
        <small>Proiect educațional</small>
      </div>
    </header>

    <div class="card" role="main">
      <label for="intrebare">Scrie sau spune întrebarea</label>
      <textarea id="intrebare" placeholder="Exemple: rezumat Harap Alb, rezumat Cenușăreasa, 8+9, 45:5, explică ecuații simple"></textarea>

      <div class="controls" style="margin-top:14px">
        <button class="btn btn-rasp" onclick="genereazaRaspuns()" title="Răspunde">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2v20M2 12h20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Răspunde
        </button>

        <button class="btn btn-voce" onclick="vorbeste()" id="butonVoce" title="Spune întrebarea">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 1v11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M5 8v3a7 7 0 0 0 14 0V8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          Spune
        </button>

        <button class="btn btn-cit" onclick="citeste()" title="Citește răspunsul">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 5h18M3 12h18M3 19h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          Citește
        </button>

        <button class="btn btn-list" onclick="showLista()" title="Lista povestiri">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 6h16M4 12h10M4 18h7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          Lista
        </button>

        <button class="btn btn-clear" onclick="sterge()" title="Curăță">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 6h18M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          Curăță
        </button>
      </div>

      <div id="raspuns" aria-live="polite"></div>
    </div>
  </div>

  <div class="signature">Făcut de Denis</div>

  <script>
    // Rezumate extinse
    const rezumate = {
      "cenușăreasa": `Cenușăreasa este o tânără blândă care rămâne fără sprijin după moartea tatălui. Mama și surorile vitrege o tratează aspru. Cenușăreasa muncește fără odihnă, are grijă de casă și visează la o viață mai bună. Într-o zi apare vestea unui bal la curte. O zână îi oferă o rochie frumoasă și pantofi de sticlă, dar avertizează că magia ține doar până la miezul nopții. La bal, prințul îi observă ea. Cei doi se îndrăgostesc, dar Cenușăreasa fuge la miezul nopții. Ea scapă, dar pierde un pantof. Prințul merge în întregul regat să o găsească pe posesoarea pantofului. După multe încercări, pantoful se potrivește și ea este recunoscută. Finalul arată eliberarea din suferință, recunoașterea binelui și începutul unei vieți noi. Tema principală este bunătatea recompensată și trecerea de la greutăți la fericire.`,
      
      "harap alb": `Harap Alb pornește la drum pentru a-și împlini o misiune impusă de tată. Călătoria îl întâlnește cu creaturi ciudate și cu încercări puternice. Pe parcurs, Harap Alb face prieteni cu puteri speciale. Acești tovarăși îl ajută la nevoie. Povestea evidențiază transformarea eroului, de la naivitate la maturitate. El învață responsabilitatea, curajul și altruismul. Conflictul principal apare din confruntarea dintre bine și rău, iar rezolvarea vine din cooperare și iscusință. În final, Harap Alb își dovedește valoarea și primește recunoașterea meritată.`,

      "amintiri din copilărie": `Amintiri din copilărie este un conglomerat de povestiri despre copilăria lui Nică. Autorul descrie scene de familie, jocuri, năzbâtii și întâmplări amuzante. Limbajul este viu, plin de expresii populare. Textele transmit căldura vieții rurale, dar și momentele tensionate cu discipline și pedepse. Cititorul înțelege cum experiențele timpurii modelează caracterul. Importanța lecturii, a prieteniei și a tradițiilor locale își face loc în fiecare episod.`,

      "povestea lui stan pățitu": `Stan Pățitu trece printr-o serie de înfrângeri cauzate de naivitate. Este păcălit, pierde bani și suferă umilințe. Pe parcurs, el învață din greșelile sale și devine mai precaut. Povestea are ton moralizator. Mesajul este clar: experiența aduce înțelepciune. Personajul rămâne memorabil prin umorul situațiilor și prin reacțiile sale sincere.`,

      "făt-frumos din lacrimă": `Făt-Frumos din lacrimă este o poveste cu accente poetice. Eroul apare ca o manifestare a purității. El pornește în misiuni care testează credința, vitejia și atașamentul față de valorile morale. Peripețiile sale includ probe de curaj și de loialitate. Tema este lupta pentru dreptate și restaurarea ordinii. Finalul aduce vindecare și recunoaștere a meritelor protagonistului.`,

      "punguța cu doi bani": `Punguța cu doi bani urmează destinul unui țăran care găsește o mică avere. Acea punguță îi schimbă viața. Apar conflicte și încercări venite din lăcomia altora. Punguța devine simbol al norocului, dar și al responsabilității. Personajele reacționează în moduri care dezvăluie trăsături morale: invidie, avariție, hărnicie. Povestea ilustrează că norocul trebuie gestionat cu înțelepciune.`,

      "capra cu trei iezi": `Capra cu trei iezi pune în față o lecție clară despre ascultare. Mama capră le spune ieziilor reguli stricte pentru a se proteja de lup. Doi iezi nu respectă instrucțiunile, iar consecința este tragică. Cel care ascultă scapă. Pe final, mama își răzbună copiii și restabilește ordinea. Tema morală este clară: ascultarea protejează viața.`,

      "ursul păcălit de vulpe": `Vulpea folosește viclenia pentru a păcăli ursul, personaj simbol al forței fără minte. Povestea arată că inteligența poate învinge puterea brută. Prin situații de umor, cititorul înțelege valoarea istețimii și a prudenței. Finalul întărește ideea că mintea și experiența sunt resurse importante.`,

      "dănilă prepeleac": `Dănilă Prepeleac este un personaj caricatural care, din prostie, pierde tot ce are. Povestea are momente de absurd și umor, dar transmite și un mesaj despre consecințele acțiunilor nechibzuite. În final, destinul personajului ia o întorsătură care obligă cititorul să reconsidere judecata inițială. Mesajul este despre echilibrul dintre noroc și responsabilitate.`,

      "soacra cu trei nurori": `Soacra cu trei nurori analizează relațiile domestice și criteriile de valoare într-o comunitate mică. Hărnicia și bunătatea sunt răsplătite. Lenea și ipocrizia primesc consecințe. Textul funcționează ca o oglindă morală a societății tradiționale.`,

      "ivan turbincă": `Ivan Turbincă este o poveste plină de umor, în care un soldat primește o turbincă fermecată. Cu ajutorul ei, el păcălește forțele supranaturale și scapă din situații dificile. Povestea combină fantastica cu comicitatea, iar tema centrală este prefăcătoria și istețimea ca instrumente de supraviețuire.`,

      "lupul și mielul": `Fabula expune o lecție morală despre abuzul de putere. Lupul reprezintă forța celor privilegiați, iar mielul simbolizează neputința. Mesajul spune că dreptatea nu este întotdeauna aplicată când prevalează forța. Fabula invită la reflecție și la apel pentru corectitudine.`,

      "meșterul manole": `Balada Meșterul Manole descrie sacrificiul creatorilor. Meșterii încearcă să ridice o mănăstire care se prăbușește. În final, se zidește un sacrificiu uman pentru a asigura stabilitatea lucrării. Povestea pune întrebări despre prețul operei și despre responsabilitatea creativității.`,

      "moara cu noroc": `Moara cu noroc urmărește degradarea morală a lui Ghiță, un om care, atras de profit, ia decizii tot mai discutabile. Pe măsură ce implicarea în afaceri crește, conflictul interior se transformă în tragedie. Autorul prezintă detalii psihologice și sociale care explică declinul personajului. Tema este avertismentul împotriva lăcomiei.`,

      "alexandru lapusneanul": `Povestirea redă figura unui conducător aspru, centru al tensiunii politice. Actele sale de cruzime produc efecte asupra întregii societăți. Textul analizează mecanismele puterii și costurile violenței. Apare o reflecție despre justiție și responsabilitatea celor ce conduc.`,

      "enigma otiliei": `Enigma Otiliei descrie relații, moșteniri și calcule sociale. Felix se află într-un joc în care interesul material și sentimentele se intersectează. Otilia simbolizează complexitatea femeii moderne confruntate cu așteptările sociale. Romanul observă cu acuitate natura intereselor și consecințele lor.`,

      "la hanul lui mânjoală": `Povestirea combină fantasticul cu satira. Personajele sunt prinse în situații care pun la grea încercare credința și rațiunea. Elementele misterioase creionează o atmosferă în care realitatea pare flexibilă. Tema este conviețuirea dintre mit și logică.`
    };

    // Utilitare
    function showLista(){
      const titluri = Object.keys(rezumate).map(t => "• " + t).join("\n");
      document.getElementById("raspuns").innerText = "Povestiri disponibile:\n\n" + titluri + "\n\nScrie: rezumat NUME_POVESTIRE";
    }

    function sterge(){
      document.getElementById("intrebare").value = "";
      document.getElementById("raspuns").innerText = "";
    }

    // Validare calcul
    function esteCalculValabil(expr){
      // acceptă cifre, spații, operatori + - * / . ( ) și caractere x și :
      const safe = /^[0-9+\-*/().\sx:]+$/i;
      return safe.test(expr.trim());
    }

    function evalueazaCalcul(expr){
      const normalized = expr.replace(/x/gi, "*").replace(/:/g, "/");
      if (!esteCalculValabil(normalized)) throw "Invalid";
      // blocăm operatori dubli
      if (/[+\-*/]{2,}/.test(normalized.replace(/\s+/g,''))) throw "Invalid";
      // evităm execuții periculoase: doar cifre și operatori în expresie
      try{
        const fn = new Function("return (" + normalized + ")");
        const val = fn();
        if (typeof val === "number" && isFinite(val)) return val;
        throw "Invalid";
      }catch(e){
        throw "Invalid";
      }
    }

    let ultimulRaspuns = "";

    function genereazaRaspuns(){
      const raw = document.getElementById("intrebare").value.trim();
      const text = raw.toLowerCase();
      if (!text){
        document.getElementById("raspuns").innerText = "Scrie o întrebare sau un exercițiu.";
        return;
      }

      // 1. Cerere explicită rezumat
      if (text.startsWith("rezumat ") || text.startsWith("rezum ") || text.includes("rezumat")){
        const after = text.replace(/^rezumat\s*/,'').replace(/^rezum\s*/,'').trim();
        let gasit = "";
        if (after){
          for (const key of Object.keys(rezumate)){
            if (after === key || key.includes(after) || after.includes(key)){
              gasit = key; break;
            }
          }
        }
        if (!gasit){
          for (const key of Object.keys(rezumate)){
            if (text.includes(key)) { gasit = key; break; }
          }
        }
        if (gasit){
          document.getElementById("raspuns").innerText = rezumate[gasit];
          ultimulRaspuns = rezumate[gasit];
          return;
        } else {
          document.getElementById("raspuns").innerText = "Nu am găsit povestea. Apeasă Lista pentru titluri exacte.";
          return;
        }
      }

      // 2. Căutare directă titlu
      for (const key of Object.keys(rezumate)){
        if (text === key || text.includes(key) || key.includes(text)){
          document.getElementById("raspuns").innerText = rezumate[key];
          ultimulRaspuns = rezumate[key];
          return;
        }
      }

      // 3. Calcul matematic
      try{
        if (esteCalculValabil(text)){
          const rez = evalueazaCalcul(text);
          const rasp = "Rezultatul este: " + rez;
          document.getElementById("raspuns").innerText = rasp;
          ultimulRaspuns = rasp;
          return;
        }
      }catch(e){
        // trecem la explicații
      }

      // 4. Explicații matematică sau română
      if (text.includes("algebr") || text.includes("ecua")){
        const msg = "Algebra clasei a 6-a include expresii, operații cu numere, ecuații simple și rezolvare de probleme. Exemplu: x + 5 = 12, atunci x = 7. Dacă ai o ecuație, scrie-o și îți arăt pașii.";
        document.getElementById("raspuns").innerText = msg;
        ultimulRaspuns = msg;
        return;
      }
      if (text.includes("geometr") || text.includes("triunghi") || text.includes("aria")){
        const msg = "Geometria include figuri plane, măsurarea unghiurilor și calculul ariilor. Suma unghiurilor într-un triunghi este 180°. Scrie o problemă concretă și îți arăt cum se rezolvă.";
        document.getElementById("raspuns").innerText = msg;
        ultimulRaspuns = msg;
        return;
      }
      if (text.includes("fractii") || text.includes("procent") || text.includes("numere prime")){
        const msg = "Pot explica fracții, procente sau noțiuni despre numere prime. Scrie un exercițiu concret și îți explic pas cu pas.";
        document.getElementById("raspuns").innerText = msg;
        ultimulRaspuns = msg;
        return;
      }

      // 5. Nimic potrivit
      document.getElementById("raspuns").innerText = "Nu am găsit răspunsul. Scrie 'rezumat' urmat de titlu sau pune un calcul. Folosește Lista pentru titluri.";
    }

    // Recunoaștere vocală
    function vorbeste(){
      if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)){
        alert("Recunoașterea vocală nu este indisponibilă în acest browser.");
        return;
      }
      const Rec = window.SpeechRecognition || window.webkitSpeechRecognition;
      const rec = new Rec();
      rec.lang = "ro-RO";
      rec.interimResults = false;
      rec.maxAlternatives = 1;
      rec.start();
      document.getElementById("butonVoce").disabled = true;
      rec.onresult = function(e){
        const spus = e.results[0][0].transcript;
        document.getElementById("intrebare").value = spus;
        genereazaRaspuns();
      };
      rec.onend = function(){
        document.getElementById("butonVoce").disabled = false;
      };
      rec.onerror = function(){
        document.getElementById("butonVoce").disabled = false;
      };
    }

    // Citire text cu voce
    function citeste(){
      if (!('speechSynthesis' in window)){
        alert("Citirea cu voce nu este disponibilă în acest browser.");
        return;
      }
      let text = ultimulRaspuns;
      if (!text) text = document.getElementById("raspuns").innerText;
      if (!text) return;
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = "ro-RO";
      utter.rate = 1;
      utter.pitch = 1;
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utter);
    }

    // Trimite la Ctrl+Enter sau Cmd+Enter
    document.getElementById("intrebare").addEventListener("keydown", function(e){
      if (e.key === "Enter" && (e.ctrlKey || e.metaKey)){
        genereazaRaspuns();
      }
    });

    // Exemplu precompletat prima dată
    if (!localStorage.getItem("prim")) {
      document.getElementById("intrebare").value = "rezumat Cenușăreasa";
      localStorage.setItem("prim","1");
    }
  </script>
</body>
</html>
