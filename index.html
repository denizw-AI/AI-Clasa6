<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Clasa a VI-a â€” RomÃ¢nÄƒ È™i MatematicÄƒ</title>
  <style>
    :root{
      --bg:#f4f6f8;
      --card:#ffffff;
      --accent:#0b66ff;
      --text:#162029;
      --muted:#556270;
      --radius:12px;
      --gap:14px;
      --maxw:900px;
    }
    html,body{
      height:100%;
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,var(--bg),#eef2f7);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .wrap{
      max-width:var(--maxw);
      margin:20px auto;
      padding:18px;
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
    }
    header h1{
      margin:0;
      font-size:20px;
      line-height:1.05;
      letter-spacing:-0.2px;
    }
    header p{
      margin:0;
      color:var(--muted);
      font-size:13px;
    }
    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:16px;
      box-shadow:0 6px 18px rgba(15,23,42,0.06);
    }
    .controls{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    textarea#intrebare{
      width:100%;
      min-height:110px;
      resize:vertical;
      padding:12px;
      border-radius:10px;
      border:1px solid rgba(15,23,42,0.06);
      font-size:15px;
      box-sizing:border-box;
      outline:none;
    }
    .row{
      display:flex;
      gap:8px;
      align-items:center;
      margin-top:12px;
      flex-wrap:wrap;
    }
    button{
      background:var(--accent);
      color:white;
      border:none;
      padding:10px 14px;
      border-radius:10px;
      font-size:14px;
      cursor:pointer;
      box-shadow:0 4px 10px rgba(11,102,255,0.12);
    }
    button.secondary{
      background:#eef3ff;
      color:var(--accent);
      box-shadow:none;
      border:1px solid rgba(11,102,255,0.08);
    }
    .small{
      padding:8px 10px;
      font-size:13px;
      border-radius:8px;
    }
    #raspuns{
      margin-top:16px;
      padding:14px;
      background:#fff;
      border-radius:10px;
      text-align:left;
      line-height:1.45;
      font-size:15px;
      box-shadow:0 6px 14px rgba(15,23,42,0.04);
      white-space:pre-wrap;
    }
    .signature{
      position:fixed;
      right:14px;
      bottom:10px;
      background:rgba(0,0,0,0.06);
      padding:8px 10px;
      border-radius:999px;
      font-size:13px;
      color:var(--muted);
      backdrop-filter:blur(4px);
    }
    /* responsive */
    @media (max-width:600px){
      header{flex-direction:column;align-items:flex-start;gap:6px}
      .row{flex-direction:column;align-items:stretch}
      button{width:100%}
      .controls{flex-direction:column}
      :root{--maxw:95%}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>AI Clasa a VI-a</h1>
        <p>RomÃ¢nÄƒ È™i MatematicÄƒ, rezumate lungi, calcule rapide, voce È™i responsive</p>
      </div>
      <div style="text-align:right">
        <small style="color:var(--muted)">Proiect educaÈ›ional</small>
      </div>
    </header>

    <div class="card">
      <label for="intrebare" style="font-weight:600">Scrie sau spune Ã®ntrebarea</label>
      <textarea id="intrebare" placeholder="Exemple: rezumat Harap Alb, rezumat CenuÈ™Äƒreasa, 8+9, 45:5, explicÄƒ ecuaÈ›ii simple"></textarea>

      <div class="controls">
        <button onclick="genereazaRaspuns()" class="small">RÄƒspunde</button>
        <button onclick="vorbeste()" class="secondary small">ðŸŽ¤ Spune Ã®ntrebarea</button>
        <button onclick="citeste()" class="small">ðŸ”Š CiteÈ™te rÄƒspunsul</button>
        <button onclick="showLista()" class="secondary small">ðŸ“š Lista povestiri</button>
        <button onclick="sterge()" class="secondary small">ðŸ§¹ CurÄƒÈ›Äƒ</button>
      </div>

      <div id="raspuns" aria-live="polite"></div>
    </div>
  </div>

  <div class="signature">FÄƒcut de Denis</div>

  <script>
    // Stocare rezumate lungi, Ã®n limba romÃ¢nÄƒ
    const rezumate = {
      "cenuÈ™Äƒreasa": `CenuÈ™Äƒreasa este o tÃ¢nÄƒrÄƒ blÃ¢ndÄƒ care trÄƒieÈ™te cu mama È™i surorile vitrege dupÄƒ moartea tatÄƒlui. ViaÈ›a ei e grea, ea munceÈ™te Ã®n bucÄƒtÄƒrie È™i poartÄƒ haine rupte. O zÃ¢nÄƒ bunÄƒ o ajutÄƒ sÄƒ meargÄƒ la bal, Ã®i dÄƒ o rochie frumoasÄƒ È™i pantofi de sticlÄƒ, dar lasÄƒ o condiÈ›ie: magia È›ine pÃ¢nÄƒ la miezul nopÈ›ii. La bal, prinÈ›ul rÄƒmÃ¢ne impresionat de ea, dar ea fuge la miezul nopÈ›ii È™i pierde un pantof. PrinÈ›ul porneÈ™te sÄƒ o caute Ã®n tot regatul, Ã®ncercÃ¢nd pantoful pe toate domniÈ™oarele. CenuÈ™Äƒreasa Ã®l probeazÄƒ, iar cÃ¢nd pantoful se potriveÈ™te, adevÄƒrul iese la ivealÄƒ È™i ea se cÄƒsÄƒtoreÈ™te cu prinÈ›ul, pÄƒrÄƒsind viaÈ›a de servitoare.`,

      "harap alb": `Harap Alb este povestea unui tÃ¢nÄƒr curajos care pleacÄƒ de acasÄƒ pentru a-È™i Ã®mplini un jurÄƒmÃ¢nt. El trece prin multe Ã®ncercÄƒri, Ã®ntÃ¢lneÈ™te personaje fantastice È™i cÃ¢È™tigÄƒ prieteni loiali. ÃŽn drum spre palat el se confruntÄƒ cu ispite, capcane È™i duÈ™mani puternici. Prietenii Ã®l ajutÄƒ cu talente speciale, iar Ã®mpreunÄƒ Ã®nving rÄƒul. Tema principalÄƒ este maturizarea, responsabilitatea È™i rolul prieteniei Ã®n biruinÈ›Äƒ.`,

      "amintiri din copilÄƒrie": `Amintiri din copilÄƒrie descriu viaÈ›a unui copil Ã®n satul tradiÈ›ional. NicÄƒ povesteÈ™te Ã®ntÃ¢mplÄƒri reale, pline de umor, poante È™i observaÈ›ii vii despre oameni. Autorul surprinde obiceiuri, jocuri, pedepse È™i lecturi din vremea aceea. Textele aratÄƒ valoarea memoriei È™i agreabilitatea limbajului popular. Cititorul Ã®nÈ›elege dinamica familiei È™i a comunitÄƒÈ›ii Ã®n care a crescut protagonistul.`,

      "povestea lui stan pÄƒÈ›itu": `Stan PÄƒÈ›itu este un personaj care trece prin Ã®nvÄƒÈ›Äƒturi dure. El este pÄƒcÄƒlit, pierde bani È™i se Ã®ntoarce la viaÈ›Äƒ mai precaut. Povestirea subliniazÄƒ importanÈ›a vigilenÈ›ei È™i a Ã®nvÄƒÈ›Äƒrii din greÈ™eli. Tema centralÄƒ este maturizarea moralÄƒ È™i consecinÈ›ele Ã®ncrederii oarbe.`,

      "fÄƒt-frumos din lacrimÄƒ": `FÄƒt-Frumos din lacrimÄƒ este o poveste poeticÄƒ despre un erou nÄƒscut dintr-o lacrimÄƒ, simbol al puritÄƒÈ›ii. El trece prin probe care Ã®i testezÄƒ curajul È™i devotamentul pentru adevÄƒr. LegÄƒtura cu iubirea È™i idealul eroic sunt teme persistente. Finalul aduce restabilirea dreptÄƒÈ›ii È™i recunoaÈ™terea valorii caracterului.`,

      "punguÈ›a cu doi bani": `PunguÈ›a cu doi bani urmÄƒreÈ™te viaÈ›a unui È›Äƒran sÄƒrac care gÄƒseÈ™te o micÄƒ avere È™i astfel schimbÄƒ destinul familiei sale. DupÄƒ ce un È›inut nesÄƒbuit Ã®ncearcÄƒ sÄƒ-i ia punguÈ›a, povestea aratÄƒ cum isteÈ›imea È™i norocul pot rÄƒsplÄƒti perseverenÈ›a. Temele sunt prudenÈ›a, hÄƒrnicia È™i consecinÈ›ele actelor egoiste.`,

      "capra cu trei iezi": `Capra cu trei iezi vorbeÈ™te despre responsabilitate parentalÄƒ È™i pericolele neascultÄƒrii. Mama caprÄƒ le dÄƒ copiilor reguli clare pentru a nu deschide uÈ™a lupului. Doi iezi sunt pÄƒcÄƒliÈ›i È™i mÃ¢ncaÈ›i, iar doar cel care a respectat sfatul scapÄƒ. DupÄƒ aceea mama se rÄƒzbunÄƒ pe lup, readucÃ¢nd ordinea È™i Ã®nvÄƒÈ›Äƒtura moralÄƒ a poveÈ™tii.`,

      "ursul pÄƒcÄƒlit de vulpe": `Ursul pÄƒcÄƒlit de vulpe prezintÄƒ confruntarea dintre forÈ›Äƒ È™i isteÈ›ime. Vulpea, cu viclenie, Ã®l pÄƒcÄƒleÈ™te pe urs È™i Ã®l lasÄƒ Ã®n dificultate. Povestea subliniazÄƒ cÄƒ puterea fÄƒrÄƒ minte poate fi Ã®nvinsÄƒ de inteligenÈ›Äƒ. Mesajul este clar, omul trebuie sÄƒ foloseascÄƒ mintea, nu doar forÈ›a.`,

      "dÄƒnilÄƒ prepeleac": `DÄƒnilÄƒ Prepeleac este un om simplu care face greÈ™eli mari dar nu renunÈ›Äƒ. El pierde ÅŸi cÃ¢È™tigÄƒ, trece prin situaÈ›ii absurde È™i Ã®nvaÈ›Äƒ pe parcurs. Povestea are umor, dar aratÄƒ È™i lecÈ›ii practice despre noroc, prostie È™i Ã®ndemÃ¢nare. Finalul oferÄƒ o rÄƒsturnare care te face sÄƒ regÃ¢ndeÈ™ti judecÄƒÈ›ile iniÈ›iale.`,

      "soacra cu trei nurori": `Soacra cu trei nurori prezintÄƒ relaÈ›ii familiale complicate. Narativa comparÄƒ atitudini, rÄƒsplÄƒteÈ™te hÄƒrnicia È™i pedepseste lenevia. Personajele ilustreazÄƒ tipare morale È™i sociale ale satului tradiÈ›ional. Textul funcÈ›ioneazÄƒ ca o lecÈ›ie despre respect È™i virtute.`,

      "ivan turbincÄƒ": `Ivan TurbincÄƒ este o poveste despre un soldat isteÈ› care primeÈ™te o turbincÄƒ fermecatÄƒ. Cu turbinca el pÄƒcÄƒleÈ™te È™i Ã®nfrÃ¢nge forÈ›e supranaturale. Tema centralÄƒ este folosirea inteligenÈ›ei pentru a scÄƒpa de primejdii. Povestea are umor È™i elemente fantastice, iar finalul subliniazÄƒ recompensa isteÈ›imii.`,

      "lupul È™i mielul": `Fabula aratÄƒ cum puterea poate inventa pretexte pentru a-i face rÄƒu celui slab. Personajele sunt simbolice, fiecare reprezintÄƒ o atitudine. Moralitatea se citeÈ™te direct, dreptatea poate fi falsificatÄƒ de cei puternici. Mesajul este un apel la corectitudine È™i reflecÈ›ie.`,

      "meÈ™terul manole": `Balada MeÈ™terul Manole este o poveste tragicÄƒ despre sacrificiu pentru artÄƒ. MeÈ™terii construiesc o mÄƒnÄƒstire care nu rezistÄƒ, pÃ¢nÄƒ cÃ¢nd un suflet trebuie zidit Ã®n piatrÄƒ pentru ca lucrul sÄƒ rÄƒmÃ¢nÄƒ. Tema sacrificiului personal pentru o creaÈ›ie durabilÄƒ stÄƒ Ã®n centrul baladei. Textul ridicÄƒ Ã®ntrebÄƒri despre preÈ›ul frumuseÈ›ii È™i obligaÈ›ia creatorului.`,

      "moara cu noroc": `Moara cu noroc urmÄƒreÈ™te viaÈ›a lui GhiÈ›Äƒ, care porneÈ™te cu intenÈ›ii bune dar e sedus de cÃ¢È™tig. Pe mÄƒsurÄƒ ce intrÄƒ Ã®n afaceri, conflictele etice cresc È™i viaÈ›a Ã®i devine ameninÈ›atÄƒ. Povestea aratÄƒ cum lÄƒcomia, frica È™i compromisurile distrug onoarea. Finalul serveÈ™te ca avertisment despre preÈ›ul pierderii valorilor.`,

      "alexandru lapusneanul": `Povestirea prezintÄƒ figura unui domn cu tendinÈ›e tiranice care revine pentru rÄƒzbunare. Textul expune violenÈ›a politicii È™i consecinÈ›ele brutalitÄƒÈ›ii. Tema centralÄƒ este abuzul puterii È™i costul acesteia pentru societate. Personajele secundare oferÄƒ contrapunct moral È™i aratÄƒ haosul pe care-l lasÄƒ Ã®n urmÄƒ.`,

      "enigma otiliei": `Enigma Otiliei urmÄƒreÈ™te relaÈ›iile complicate dintre moÈ™teniri, iubire È™i interese sociale. Felix, tÃ¢nÄƒr prudent, È™i Otilia, femeie complexÄƒ, se aflÄƒ Ã®n centrul unui tablou al societÄƒÈ›ii burgheze. Tema e lupta Ã®ntre sentimente sincere È™i interese materiale. Romanul dezvÄƒluie ipocrizia È™i mecanismele sociale care influenÈ›eazÄƒ alegerile.`,

      "moara cu noroc (rezumat extra)": `Moara cu noroc aratÄƒ cum tentaÈ›ia banilor altereazÄƒ caractere. GhiÈ›Äƒ se lasÄƒ prins Ã®n jocuri murdare, iar relaÈ›iile se destramÄƒ. Autorul descrie mediul, oamenii È™i transformarea sufleteascÄƒ a protagonistului. Povestea oferÄƒ exemple concrete despre cum deciziile mici duc la catastrofe morale.`,

      "la hanul lui mÃ¢njoalÄƒ": `La hanul lui MÃ¢njoalÄƒ are accente fantastice È™i satirice. Personajele descoperÄƒ secrete È™i legende care pot schimba percepÈ›ia realitÄƒÈ›ii. Povestirea alternÄƒ Ã®ntre umor È™i mister, iar finalul lasÄƒ cititorul cu Ã®ntrebÄƒri despre real È™i imaginar. Tema este echilibrul dintre credinÈ›Äƒ È™i raÈ›iune.`,

      "popa tanda": `Popa Tanda este despre un preot care trece de la lene la implicare. El descoperÄƒ cÄƒ exemplul personal schimbÄƒ comunitatea. Povestea aratÄƒ transformarea interioarÄƒ È™i responsabilitatea socialÄƒ. Mesajul este despre puterea schimbÄƒrii prin acÈ›iuni concrete.`,

      "doamna traista": `Doamna Traista prezintÄƒ inventivitatea unei femei care Ã®È™i salveazÄƒ familia din dificultÄƒÈ›i. Ea gÄƒseÈ™te soluÈ›ii practice, unele amuzante, care dau speranÈ›Äƒ comunitÄƒÈ›ii. Povestea pune accent pe forÈ›a ingeniozitÄƒÈ›ii È™i pe solidaritate.`,

      "povestiri populare extra": `Am inclus aici È™i alte rezumate scurte. DacÄƒ vrei detalii mai lungi pentru o povestire anume, spune titlul È™i Ã®È›i dezvolt pe pagini separate.`
    };

    // Helper: afiÈ™eazÄƒ lista de titluri
    function showLista(){
      const titluri = Object.keys(rezumate).map(t => "- " + t).join("\n");
      document.getElementById("raspuns").innerText = "Povestiri disponibile:\n" + titluri + "\n\nScrie: rezumat NUME_POVESTIRE";
    }

    // Sterge input si raspuns
    function sterge(){
      document.getElementById("intrebare").value = "";
      document.getElementById("raspuns").innerText = "";
    }

    // Validare expresie matematica sigura
    function esteCalculValabil(expr){
      // AcceptÄƒ cifre, spaÈ›ii, operatori + - * / . ( ) È™i caractere x È™i :
      const safe = /^[0-9+\-*/().\sx:]+$/i;
      return safe.test(expr);
    }

    function evalueazaCalcul(expr){
      // ÃŽnlocuieÈ™te x cu * È™i : cu /
      const normalized = expr.replace(/x/gi, "*").replace(/:/g, "/");
      // BlocheazÄƒ expresii cu douÄƒ operatori la rÃ¢nd sau Ã®nceput cu operator invalid
      if (!esteCalculValabil(normalized)) throw "Invalid";
      // Eval Ã®ntr-un mod limitat
      // Folosim Function, dar doar dupÄƒ validare strictÄƒ
      try{
        // Prevenim cazuri cu operatori dubli ca "++" sau "**"
        if (/[+\-*/]{2,}/.test(normalized.replace(/\s+/g,''))) throw "Invalid";
        const fn = new Function("return (" + normalized + ")"); 
        const val = fn();
        if (typeof val === "number" && isFinite(val)) return val;
        throw "Invalid";
      }catch(e){
        throw "Invalid";
      }
    }

    let ultimulRaspuns = "";

    function genereazaRaspuns(){
      const raw = document.getElementById("intrebare").value.trim();
      const text = raw.toLowerCase();
      if(!text){
        document.getElementById("raspuns").innerText = "Scrie o Ã®ntrebare sau un exerciÈ›iu.";
        return;
      }

      // 1. Cerere explicitÄƒ rezumat
      if (text.startsWith("rezumat ") || text.startsWith("rezum ") || text.includes("rezumat")){
        // gÄƒseÈ™te titlul dupÄƒ cuvÃ¢ntul rezumat
        const after = text.replace(/^rezumat\s*/,'').replace(/^rezum\s*/,'').trim();
        // cÄƒutare exactÄƒ sau parÈ›ialÄƒ
        let gasit = "";
        if (after){
          for (const key of Object.keys(rezumate)){
            if (after === key || key.includes(after) || after.includes(key)){
              gasit = key; break;
            }
          }
        }
        // dacÄƒ nu este nume, Ã®ncercÄƒ sÄƒ detectezi titlul Ã®n propoziÈ›ie
        if (!gasit){
          for (const key of Object.keys(rezumate)){
            if (text.includes(key)) { gasit = key; break; }
          }
        }
        if (gasit){
          document.getElementById("raspuns").innerText = rezumate[gasit];
          ultimulRaspuns = rezumate[gasit];
          return;
        } else {
          document.getElementById("raspuns").innerText = "Nu am gÄƒsit povestea. FoloseÈ™te butonul Lista povestiri pentru a vedea titlurile exacte.";
          return;
        }
      }

      // 2. CÄƒutare directÄƒ titlu (fÄƒrÄƒ cuvÃ¢nt rezumat)
      for (const key of Object.keys(rezumate)){
        if (text === key || text.includes(key) || key.includes(text)){
          document.getElementById("raspuns").innerText = rezumate[key];
          ultimulRaspuns = rezumate[key];
          return;
        }
      }

      // 3. Calcul matematic
      try{
        // dacÄƒ pare un calcul
        if (esteCalculValabil(text)){
          const rez = evalueazaCalcul(text);
          const rasp = "Rezultatul este: " + rez;
          document.getElementById("raspuns").innerText = rasp;
          ultimulRaspuns = rasp;
          return;
        }
      }catch(e){
        // trecem mai departe la explicaÈ›ii
      }

      // 4. ExplicaÈ›ii de matematicÄƒ sau romÃ¢nÄƒ
      if (text.includes("algebr") || text.includes("ecua")){
        const msg = "Algebra clasei a 6-a include expresii, operatii cu numere, ecuatii simple si rezolvare de probleme. Exemplu concret: x + 5 = 12, atunci x = 7. DacÄƒ ai o ecuaÈ›ie, scrie-o È™i Ã®È›i arÄƒt paÈ™ii.";
        document.getElementById("raspuns").innerText = msg;
        ultimulRaspuns = msg;
        return;
      }
      if (text.includes("geometr") || text.includes("triunghi") || text.includes("aria")){
        const msg = "Geometria include studiul figuri plane, masurarea unghiurilor si calculul ariilor. Suma unghiurilor unui triunghi este 180 de grade. Scrie o figurÄƒ sau o problemÄƒ È™i Ã®È›i arÄƒt cum se calculeazÄƒ.";
        document.getElementById("raspuns").innerText = msg;
        ultimulRaspuns = msg;
        return;
      }
      if (text.includes("fractii") || text.includes("procent") || text.includes("numere prime")){
        const msg = "Pot explica fracÈ›ii, procente sau noÈ›iuni despre numere prime. Scrie o Ã®ntrebare concretÄƒ sau un exerciÈ›iu È™i Ã®È›i explic pas cu pas.";
        document.getElementById("raspuns").innerText = msg;
        ultimulRaspuns = msg;
        return;
      }

      // 5. DacÄƒ nu a fost nimic potrivit
      document.getElementById("raspuns").innerText = "Nu am gÄƒsit rÄƒspunsul. Scrie 'rezumat' urmat de titlu sau pune un calcul. FoloseÈ™te butonul Lista povestiri pentru a vedea titlurile.";
    }

    // RecunoaÈ™tere vocalÄƒ
    function vorbeste(){
      if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)){
        alert("RecunoaÈ™terea vocalÄƒ nu este disponibilÄƒ Ã®n acest browser.");
        return;
      }
      const Rec = window.SpeechRecognition || window.webkitSpeechRecognition;
      const rec = new Rec();
      rec.lang = "ro-RO";
      rec.interimResults = false;
      rec.maxAlternatives = 1;
      rec.start();
      rec.onresult = function(e){
        const spus = e.results[0][0].transcript;
        document.getElementById("intrebare").value = spus;
        genereazaRaspuns();
      };
      rec.onerror = function(){
        // Nu afiÈ™Äƒm multe mesaje, doar curÄƒÈ›Äƒm
        console.log("Eroare recunoaÈ™tere vocalÄƒ");
      };
    }

    // Citire text cu voce
    function citeste(){
      if (!('speechSynthesis' in window)){
        alert("Citirea cu voce nu este disponibilÄƒ Ã®n acest browser.");
        return;
      }
      let text = ultimulRaspuns;
      if (!text) text = document.getElementById("raspuns").innerText;
      if (!text) return;
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = "ro-RO";
      utter.rate = 1;
      utter.pitch = 1;
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utter);
    }

    // Tastare Enter pentru a trimite
    document.getElementById("intrebare").addEventListener("keydown", function(e){
      if (e.key === "Enter" && (e.ctrlKey || e.metaKey)){
        genereazaRaspuns();
      }
    });

    // Sugestie: exemplu precompletat pentru testare la prima Ã®ncÄƒrcare
    if (!localStorage.getItem("prim")) {
      document.getElementById("intrebare").value = "rezumat Harap Alb";
      localStorage.setItem("prim","1");
    }
  </script>
</body>
</html>
